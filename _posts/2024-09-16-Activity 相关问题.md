---
title: Activity 相关问题
top: false
cover: false
toc: true
mathjax: true
date: 2023-11-21 14:45:15
summary:
categories: [Android]
tags: [Interview]
---
Q：当dialog弹出来的时候，Activity执行了哪些生命周期的方法，当dialog消失的时候，又执行了哪些方法？
A：如果是单纯是创建的dialog，Activity并不会执行生命周期的方法.
弹框Activity：onPause(1) --> onCreate(2) --> onStart(2) ---> onResume(2) (不会走第一个activity的onStop)

Q：设备横竖屏切换的时候，Activity的生命周期是如何变化的？
A：不设置Activity的android:configChanges时，切屏会重新调用各个生命周期，切横屏时会执行一次，切竖屏时会执行两次；
设置Activity的android:configChanges="orientation"时，切屏还是会重新调用各个生命周期，切横、竖屏时只会执行一次；
设置Activity的android:configChanges="orientation|keyboardHidden"时，切屏不会重新调用各个生命周期，只会执行onConfigurationChanged方法；
tips：还有一点，非常重要，一个Android的变更细节！
当API >12时，需要加入screenSize属性，否则屏幕切换时即使你设置了orientation系统也会重建Activity！

Q：如何快速启动一个Activity？
A：这个问题其实也是比较简单的，就是不要在Activity的onCreate方法中执行过多繁重的操作，并且在onPasue方法中同样不能做过多的耗时操作。

Q：Activity异常退出该如何处理？
A：
Activity异常退出的时候 --> onPause() --> onSaveInstanceState() --> onStop() --> onDestory()，需要注意的是onSaveInstanceState() 方法与onPause并没有严格的先后关系，有可能在onPause之前，也有可能在其后面调用，但会在onStop()方法之前调用；
异常退出后又重新启动该Activity --> onCreate() --> onStart() --> onRestoreInstanceState() --> onResume()；
搞懂这个生命周期的执行后就可以回答了，首先要知道面试官的意思，是要重新启动并恢复这个Activity还是说直接退出整个app，如果要恢复则要在onSaveInstanceState()中进行保存数据并在onRestoreInstanceState()中进行恢复，如果是要退出app的话就要捕获全局的异常信息，并退出app。
当然我建议是使用UncaughtExceotionHandler来捕获全局异常进行退出app的操作，这样会减少之前崩溃所造成的后遗症！

Q：Activity的onNewInstent()方法什么时候会执行？
A：这个是启动模式中的了，当此Activity的实例已经存在，并且此时的启动模式为SingleTask和SingleInstance，另外当这个实例位于栈顶且启动模式为SingleTop时也会触发onNewInstent()。

Q：锁定屏与解锁屏幕，Activity如何执行生命周期的？
A：onPause()  --->  onStop，开屏后则调用onStart() ---> onResume()。

Q：如何修改 Activity 进入和退出动画？
A：
可 以 通 过 两 种 方 式 ， 一 是 通 过 定 义 Activity 的 主 题 ， 二 是 通 过 覆 写 Activity 的overridePendingTransition 方法。
通过设置主题样式在 styles.xml 中编辑如下代码：
添加 themes.xml 文件：
在 AndroidManifest.xml 中给指定的 Activity 指定 theme。
覆写 overridePendingTransition 方法：
overridePendingTransition(R.anim.fade, R.anim.hold);

Q：Activity间通过Intent传递数据大小有没有限制？
A：Intent在传递数据时是有大小限制的，这里官方并未详细说明，不过通过实验的方法可以测出数据应该被限制在1MB之内（1024KB），笔者采用的是传递Bitmap的方法，发现当图片大小超过1024（准确地说是1020左右）的时候，程序就会出现闪退、停止运行等异常(不同的手机反应不同)，因此可以判断Intent的传输容量在1MB之内。